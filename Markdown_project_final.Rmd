---
title: NSW Groundwater hydrogeochemistry
subtitle: Field analyses"
author: Chloe Plet
affiliation: "CSIRO Mineral Resources - Team: Minerals and Water" # Or group/team
photo: resources/img/photo.jpeg

#short_title: Optional short title

output: DSreport::project_summary
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(
  results = 'asis',
  echo = FALSE,
  warning = FALSE,
  message = FALSE,
  fig.align = 'center'
)

#Load libraries
library(tidyverse)
library(kableExtra)
library(sf)
library(ggplot2)
library(colorspace)
library(gganimate)

install.packages("gifski")
install.packages("Rtools")

#read files and create dataframes
Field_NSW<-read_csv("resources/results/Obs_Field_simple.csv")
```


# Introduction

With a background on biominerals, palaeoenvironemental reconstruction and organic geochemistry, I am now a postdoctoral researcher at CSIRO. Although I learned some matlab during my undergrad, I had never really understood it or used it. I was mostly using excel, which often made me very frustrated. I really enjoyed the data school FOCUS particularly learning to "speak to computers" and basic coding skills. Learning R basics has definitely changed my perspective on how to record data and given me a new view on time management when receiving large and complex excel datasheets. 


# My Project

I worked on hydrogeochemical data from a NSW groundwater survey. My initial goal was to build a script that I could use for our groundwater surveys in NSW but also Australia-wide. These reason for these groundwater analyses is the identification and of buried mineral deposits.The secondary objective was to supply groundwater information to the population. 
To do so I aimed to combine field observations and geolocation with a range of laboratory analyses. Unfortunately, this was too optimistic within Data School FOCUS timeframe and my personal availabilities. I have since simplified the dataset focusing on field collected data for this presentation and an extract of the final table is presented below.



## Preliminary results

This section will demonstrate the different visuals you might want use to show off your 
project. Don't feel the need to go overboard, this is supposed to give a taste of the work you are
doing rather than being a publication ready document.

To get tables formatting correctly, use `knitr::kable` to convert the table to html format. If
you also want to have alternate row highlighting, pass the result to `kable_styling('striped')` 
from the `kableExtra` package.

**Tables**
```{r mytable, out.width='100%', echo = T}
knitr::kable(head(Field_NSW, n = 5), format = "html", caption = "Field data") %>% 
  kable_styling("striped")
```

**Images from a file**

![](resources/img/tidyverse.png){width=100px}

**Plots from R**
```{r standard-plot, out.width='60%', fig.align='center', fig.height= 4, fig.width=6, fig.cap="Yet another gapminder plot"}
  
# Read the state shapes in and simplify them for faster plotting
# (The coastlines are *really* accurate and would take too long if we tried to plot them as is)
state_borders <- read_sf("resources/AUS_states") %>%
  st_simplify(dTolerance = 0.01)


    

Temperature_plot<- ggplot(data = subset(Field_NSW, !is.na(Temperature)),
       mapping=aes(x = Longitude, 
                   y = Latitude,
                   colour = Temperature
                  ))+
  geom_sf(data = state_borders, inherit.aes = F)+
         geom_point()+
     scale_color_gradient2(low = "royalblue1", mid = "gold1", high = "firebrick1",midpoint = 18, space = "Lab", guide = "colourbar", aesthetics = "colour")+
  scale_x_continuous(limits =  c(140,154)) + 
  scale_y_continuous(limits = c(-38,-28))+
  theme(panel.background = element_rect(fill = "lightblue"), panel.grid= element_blank())

ggsave("Temperature_plot.eps", plot= Temperature_plot, device = "eps", dpi = 300)

anim_Temperature<-Temperature_plot+
    transition_states(Temperature)+
     shadow_mark(past = TRUE, future = FALSE, alpha = alpha/2)

animate(anim_Temperature)


#Conductivity_plot<- ggplot(data = subset(Field_NSW, !is.na(Conductivity)),
                 #mapping= aes(x= Longitude, 
                            #  y= Latitude, 
                            #  colour = Conductivity))+
  #geom_sf(data = state_borders, inherit.aes= F)+
 # geom_point()+
 # scale_color_gradient2(low= "cadetblue1", high= "chocolate1", midpoint= 6000, space = "Lab", guide = "colourbar", aesthetics = "colour")+ #need to fix colour scale
  #scale_x_continuous(limits =  c(140,154)) + 
  #scale_y_continuous(limits = c(-38,-28))


pH_plot<- ggplot(data = subset(Field_NSW, !is.na(pH)), 
                 mapping= aes(x= Longitude, 
                              y= Latitude, 
                              colour = pH))+
  geom_sf(data = state_borders, inherit.aes= F)+
  geom_point()+
  scale_color_gradient2(low= "gray0", mid = "cyan2", high= "chartreuse", midpoint= 8, space = "Lab", guide = "colourbar", aesthetics = "colour")+
  scale_x_continuous(limits =  c(140,154)) + 
  scale_y_continuous(limits = c(-38,-28))+
  theme(panel.background = element_rect(fill = "lightblue"), panel.grid= element_blank())


anim_pH<-pH_plot+
    transition_states(pH)+
     shadow_mark(past = TRUE, future = FALSE, alpha = alpha/2)

animate(anim_pH)

Eh_plot<- ggplot(data = subset(Field_NSW,!is.na(Eh)),
                 mapping= aes(x= Longitude, 
                              y= Latitude, 
                              colour = Eh))+
  geom_sf(data = state_borders, inherit.aes= F)+
  geom_point()+
  scale_color_gradient2(low = "steelblue1", mid = "hotpink", high = "sienna1", midpoint = 120, space = "Lab", guide = "colourbar", aesthetics = "colour")+
  scale_x_continuous(limits =  c(140,154)) + 
  scale_y_continuous(limits = c(-38,-28))+
  theme(panel.background = element_rect(fill = "lightblue"), panel.grid= element_blank())

anim_Eh<-Eh_plot+
   transition_states(Eh)+
     shadow_mark(past = TRUE, future = FALSE, alpha = alpha/2)

animate(anim_Eh)

```

Your figure and table captions are automatically numbered and can be referenced in the text
if needed: see eg. Table \@ref(tab:mytable) and Figure \@ref(fig:standard-plot)

# My Digital Toolbox

What digital tools have you been using in your project? Which ones have you learned since starting 
Data School?

You can use all the usual R markdown features in writing a project summary, including lists:

* R - dplyr, ggplot, ...
* Python
* SQL

## Favourite tool (optional)

Is there a tool/package/function in particular that you've enjoyed using? Give it a special shout out here.

![](https://raw.githubusercontent.com/tidyverse/ggplot2/master/man/figures/logo.png){.pull-right width=100px}

No prizes for guessing mine:

# My time went ...

My time went 

# Next steps

What further steps do you wish your project could take? Or are there any new digital skills that you
are keen to develop as a result of your involvement in the Data School?

# My Data School Experience

This poster is mostly about your synthesis project. However we would also like to hear about other
parts of your Data School experience. What aspects of the program did you really enjoy? How have you
been applying the skills you have learned in your daily work? Have you been able to transfer this 
knowledge to your team members? Concrete examples demonstrating this would be useful here
(meetings/talks/collaborations/new roles). Any descriptions of the personal impact the program has 
had are welcome here as well!
